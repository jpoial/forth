 Modula-DataBase: HELP ( Ain Isotamm, Tartu University )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \ #1 Editor support                                  08/28/90 ) HEX                                                             : ENV_SEG ENV_ADDR @ 10 / ?fs: + ;                              : ADRUN ( addr1 addr2 --- )                                             HIDDEN                                                          PGM_NAME 40 ERASE CMD_LINE 40 ERASE                             DUP C@ 1+ CMD_LINE SWAP CMOVE                                   COUNT PGM_NAME SWAP CMOVE ENV_SEG exec-run                      FORTH ;                                                 HANDLE wFILE   wFILE DROP 45 ERASE                              DIRECTORY EDITOR_NAME EDITOR_NAME DIRNAME NE.COM                DECIMAL                                                         : HANDNAME DROP 4 + ;                                           : M2EDIT                                                                EDITOR_NAME wFILE HANDNAME ADRUN ;                      -->                                                             \ #2 LEG.NAME                                        08/28/90 ) : DEF-NAME?                                                     MASTER_RECORD 60 + C@ 0=                                          IF H-WINDOW W-CLEAR                                                1 1 H-WINDOW W-GOTOXY ." Kirjeldusmooduli nimi: "               CURSOR-ON MASTER_RECORD 61 + 36 EXPECT CURSOR-OFF               SPAN @ 4 + MASTER_RECORD 60 + C!                                LIT" .DEF" 1+ MASTER_RECORD 61 + SPAN @ + 4 CMOVE            THEN ;                                                        -->                                                                                                                                                                                                                                                                                                                                                                                                                                                             \ #3 LEG.NAME                                        08/28/90 ) HEX                                                             ( : HEREPARA HERE 0F + FFFF0 AND DUP DP ! ; )                   : CREATE_ENV HEREPARA ENV_ADDR ! ;                              : INIT_ENV ENV_ADDR @ DP ! ;                                    : ENV_END 0 C, ;                   DECIMAL                      : LEG.NAME                                                      DEF-NAME?                                                       MASTER_RECORD 60 + DUP C@ 1+ wFILE DROP 4 + SWAP CMOVE          LIT" DEF" 1+ MASTER_RECORD 60 + C@ 2 -                          wFILE DROP 4 + + 3 CMOVE ;                                      : HELPM2B                                                       LIT" HELP.M2B"                                                  DUP C@ 1+ wFILE DROP 4 + SWAP CMOVE ;                           -->                                                                                                                             \ #4 Printeri laadimine                              12/14/90 ) HEX                                                             HANDLE SEPIK   SEPIK DROP 45 ERASE                              DIRECTORY SETPR_NAME SETPR_NAME DIRNAME SETPRINT.EXE            HANDLE TRIKK   TRIKK DROP 45 ERASE                              DIRECTORY TRIKK_NAME TRIKK_NAME DIRNAME TRYKK.COM               HANDLE TSWIC   TSWIC DROP 45 ERASE                 DECIMAL      DIRECTORY TSWIC_NAME TSWIC_NAME DIRNAME TSWITCH.COM             : SET.PR SETPR_NAME SEPIK HANDNAME ADRUN ;                      : SET+PRINT ( --- )                                             LIT" RUSSS.ESC" DUP C@ 1+ SEPIK DROP 4 + SWAP CMOVE ;           : PRINT+SET SET+PRINT SET.PR ;                                  : SET.TR TRIKK_NAME TRIKK HANDNAME ADRUN ;                      : SET+TRIKK ( --- )                                             LIT"  " DUP C@ 1+ TRIKK DROP 4 + SWAP CMOVE ;                   -->                                                             \ #5 run                                             12/16/90 ) : TRIKK+SET SET+TRIKK SET.TR ;                                  : SET.SW TSWIC_NAME TSWIC HANDNAME ADRUN ;                      : SET+TSWIC ( --- )                                             LIT"  " DUP C@ 1+ TSWIC DROP 4 + SWAP CMOVE ;                   : TSWIC+SET SET+TSWIC SET.SW ;                                  : LAADI-TRYKK ( --- )                                           >vPUHVER CLEARSCREEN TRIKK+SET TSWIC+SET PRINT+SET TSWIC+SET    2 22 GOTOXY ." Vajutage  " Iy ENT-PILT Iyo                      KEY DROP <vPUHVER ;                                             : HMSYS HMSYS-W W-BORDER HMSYS-W W-HOME                         ." S" 129 EMIT ." steem "  ;                                    : HMLEG HMLEG-W W-BORDER HMLEG-W W-HOME ."  Legend " ;          : HMEDI HMEDI-W W-BORDER HMEDI-W W-HOME ."  Editor "  ;         : HMBAC HMBAC-W W-BORDER HMBAC-W W-HOME ."  Tagasi "  ;         -->                                                             \ #6 First menu                                      01/24/90 ) VARIABLE H-INDEX  0 H-INDEX !                                   : HM-BACK ( --- )                                               HMSYS HMLEG HMEDI HMBAC ;                                       : HM-OFF ( --- )                                                H-INDEX @ CASE 0 OF HMSYS-W RevOFF HMSYS ENDOF                                 4 OF HMLEG-W RevOFF HMLEG ENDOF                                 8 OF HMEDI-W RevOFF HMEDI ENDOF                                12 OF HMBAC-W RevOFF HMBAC ENDOF                            ENDCASE ;                                             -->                                                                                                                                                                                                                                                                                                                                                                                             \ #7  MDB-Help: Control                              01/12/90 ) : HM-ON ( --- )                                                 H-INDEX @ CASE 0 OF HMSYS-W RevON HMSYS ENDOF                                  4 OF HMLEG-W RevON HMLEG ENDOF                                  8 OF HMEDI-W RevON HMEDI ENDOF                                 12 OF HMBAC-W RevON HMBAC ENDOF                             ENDCASE ;                                             -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             \ #8 First menu                                      01/24/90 ) : SHOW-HELP HMENU-W W-BORDER HMENU-W W-CLEAR HMENU-W W-HOME     Iy ."           MODULA - DataBase HELP "                        6 11 HMENU-W W-GOTOXY ." Vali "  24 EMIT ."  ja " 25 EMIT       ."  abil vajalik aken " ENT-PILT Iyo HM-BACK ;                  -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             \ #9  MDB-Help: Control                              01/12/90 ) : H-ALLA ( --- )                                                H-INDEX @ CASE 0 OF HM-OFF  4 H-INDEX ! HM-ON ENDOF                            4 OF HM-OFF  8 H-INDEX ! HM-ON ENDOF                            8 OF HM-OFF 12 H-INDEX ! HM-ON ENDOF                           12 OF HM-OFF  0 H-INDEX ! HM-ON ENDOF                       ENDCASE ;                                             -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             \ #10 MDB-Help: Control                              02/01/90 ) : H-YLES ( --- )                                                H-INDEX @ CASE 0 OF HM-OFF 12 H-INDEX ! HM-ON ENDOF                            4 OF HM-OFF  0 H-INDEX ! HM-ON ENDOF                            8 OF HM-OFF  4 H-INDEX ! HM-ON ENDOF                           12 OF HM-OFF  8 H-INDEX ! HM-ON ENDOF                        ENDCASE ;                                            -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             \ #11 MDB-Help: H-LEGEND                             02/01/90 ) : H-LEGEND  LEGEND-W W-BORDER LEGEND-W W-CLEAR LEGEND-W W-HOME  Iy ."                          LEGEND" Iyo                       2 2 LEGEND-W W-GOTOXY ." Andmekirjeldust n" 132 EMIT           ." itan NortonEditor'i (NED.COM) abil;"                          2 3 LEGEND-W W-GOTOXY ." selle esimese ekraani asemele tuleb"   ."  legend suvalise"                                            2 4 LEGEND-W W-GOTOXY ." klahvi ( v.a. F1 - F12 ) "             ." vajutamisel."                                               2 5 LEGEND-W W-GOTOXY ."   Legendi muuta "                      ." ei soovita. Tagasi saab, vajutades "                          16 7 LEGEND-W W-GOTOXY Iy ." F3,  Q  ja  Y  "                   ENT-PILT Iyo ."  "                                              10 10 LEGEND-W W-GOTOXY ." Vajutage m" 147 EMIT ." nda klahvi   |   " REVERSE ." Esc" REVERSE-OFF ;                            -->                                                             \ #12 Time handle                                    04/01/90 ) : H-LEG >vPUHVER H-LEGEND KEY 27 <>                                     IF ?MODE 7 <> IF 3 MODE 2 FOREGROUND THEN                          LEG.NAME M2EDIT                                                 ?MODE 7 <> IF B/W THEN                                       THEN                                                            <vPUHVER ;                                              : H-SYS ( --- )                                                 >vPUHVER HMENYY.ETTE <vPUHVER ;                                 -->                                                                                                                                                                                                                                                                                                                                                                                                                                                             \ #13  MDB-Help: Editor                              01/12/90 ) : H-P HMENU-W W-GOTOXY ;                                        : E-SABA Iy 12 9 HMENU-W W-GOTOXY ." Esc  "                     Iyo ." Redigeerimise l" 147 EMIT ." pp"                         0 11 HMENU-W W-GOTOXY REVERSE ."  " 24 EMIT ."  "  REVERSE-OFF  21 11 HMENU-W W-GOTOXY REVERSE ." ESC"             REVERSE-OFF  41 11 HMENU-W W-GOTOXY REVERSE ."  " 25 EMIT ."  " REVERSE-OFF  ;                                                               : H-KURSOR  HMENU-W W-BORDER HMENU-W W-CLEAR HMENU-W W-HOME     Iy ."                   KURSOR" Iyo                              2 2 H-P Iy 24 EMIT Iyo ."  Rida "   129 EMIT ." les "           2 3 H-P Iy 17 EMIT 205 EMIT Iyo ."  Kursor vasemale "           24 3 H-P Iy 205 EMIT 16 EMIT Iyo ."  Kursor paremale "          2 4 H-P Iy ." ^" 17 EMIT 205 EMIT Iyo                           ."  V" 132 EMIT ." lja algusse"                                  24 4 HMENU-W W-GOTOXY Iy ." ^" 205 EMIT 16 EMIT Iyo     -->   ( #14  MDB-Help: Editor                              01/31/90 ) ."  V" 132 EMIT   132 EMIT ." rtuse l" 147 EMIT ." ppu "         2 5 HMENU-W W-GOTOXY Iy ENT-PILT Iyo                           ."  Sisesta ja mine j"                                          132 EMIT ." rgmisele v" 132 EMIT ." ljale"                       2 6 HMENU-W W-GOTOXY Iy ." ^" ENT-PILT Iyo                     ."  Sisesta ja mine eelmisele "                                 ." v" 132 EMIT ." ljale"                                         2 7 HMENU-W W-GOTOXY Iy ." Insert " Iyo                        ." Nihutamine sisse | v" 132 EMIT ." lja"                       24 2 H-P Iy 25 EMIT Iyo ."  Rida alla " E-SABA ;                -->                                                                                                                                                                                                                                                                                                                             \ #15 MDB-Help: Editor                               01/12/90 )  : H-EKRAAN  HMENU-W W-BORDER HMENU-W W-CLEAR HMENU-W W-HOME    Iy ."                   EKRAAN"                                 Iy 2 2 HMENU-W W-GOTOXY ." Home " Iyo                           ." Ekraani algusse"                                             Iy 24 2 HMENU-W W-GOTOXY ." End  " Iyo                          ." Ekraani l" 147 EMIT ." ppu"                                  Iy 2 3 HMENU-W W-GOTOXY ." PageUp   " Iyo                       ." Eelmise ekraani algusse"                                     Iy 2 4 HMENU-W W-GOTOXY ." PageDown " Iyo                       ." J" 132 EMIT ." rgmise ekraani algusse"                       Iy 2 5 HMENU-W W-GOTOXY ." ^Home " Iyo                          ." Kirje algusse"                                               Iy 24 5 HMENU-W W-GOTOXY ." ^End  " Iyo                         ." Kirje l" 147 EMIT ." ppu" E-SABA ;                           -->                                                             \ #16 MDB-Help: Editor                               01/13/90 ) : H-DELETE  HMENU-W W-BORDER HMENU-W W-CLEAR HMENU-W W-HOME     Iy ."                KUSTUTAMINE"                               Iy 2 2 HMENU-W W-GOTOXY ." Delete " Iyo                         ." Kustuta paremalt"                                            Iy 2 3 HMENU-W W-GOTOXY ." BackSpace " Iyo                      ." Kustuta vasemalt"                                            Iy 2 4 HMENU-W W-GOTOXY ." Alt-F9 " Iyo                         ." Kustuta k" 147 EMIT ." ik v" 132 EMIT ." ljad"               Iy 2 5 HMENU-W W-GOTOXY ." ^F9 " Iyo                            ." Kustuta v" 132 EMIT ." li"                                   Iy        2 6 HMENU-W W-GOTOXY ." F9 " Iyo ." Kustuta v" 132    EMIT ." li kursorist l" 147 EMIT ." puni"                       E-SABA ;                                                        -->                                                                                                                             \ #17 MDB-Help: Editor                               02/09/90 ) : H-PF HMENU-W W-BORDER HMENU-W W-CLEAR HMENU-W W-HOME          Iy ."               FUNKTSIOONID"                               Iy 2 1 HMENU-W W-GOTOXY ." F1 " Iyo                             ." Anna infot s" 129 EMIT ." steemi t" 148 EMIT 148 EMIT ." st" Iy 2 2 HMENU-W W-GOTOXY ." F2 " Iyo                             ." N" 132 EMIT ." ita t" 129 EMIT 129 EMIT                      ." p ja kitsendused ( lipp ) "                                  Iy 2 3 HMENU-W W-GOTOXY ." F3 " Iyo                             ." N" 132 EMIT ." ita v" 132 EMIT 132 EMIT ." rtusvaru"         Iy 2 4 HMENU-W W-GOTOXY ." F4 " Iyo                             ." N" 132 EMIT ." ita tabelit ( t" 129 EMIT 129 EMIT            ." p ARRAY ) "                                                  -->                                                                                                                                                                                             ( #18 MDB-Help: Editor control                       02/09/90 ) Iy 2 5 HMENU-W W-GOTOXY ." F5 " Iyo                             ." J" 132 EMIT ." ta jooksev kirje seis meelde"                 Iy 2 6 HMENU-W W-GOTOXY ." F6 " Iyo                             ." Vaheta akende v" 132 EMIT ." rve"                            Iy 2 7 HMENU-W W-GOTOXY ." F7 " Iyo ." Tabelirea paljundus"     Iy 2 8 HMENU-W W-GOTOXY ." F8 " Iyo ." Tabeliveeru paljundus"   Iy 2 9 HMENU-W W-GOTOXY ." F9 " Iyo                             ." Kustuta kursorist v" 132 EMIT ." lja l" 147 EMIT ." puni"    Iy 2 10 HMENU-W W-GOTOXY ." F10 " Iyo                           ." Taasta esialgne v" 147 EMIT ." i F5 abil fiks. seis"         0 11 HMENU-W W-GOTOXY REVERSE ."  " 24 EMIT ."  "  REVERSE-OFF  21 11 HMENU-W W-GOTOXY REVERSE ." ESC"             REVERSE-OFF  41 11 HMENU-W W-GOTOXY REVERSE ."  " 25 EMIT ."  " REVERSE-OFF  ;                                                               -->                                                             \ #19 MDB-Help: Editor                               01/13/90 ) : H-INPUT  HMENU-W W-BORDER HMENU-W W-CLEAR HMENU-W W-HOME      Iy ."                SISESTAMINE"                               Iy 2 2 HMENU-W W-GOTOXY ENT-PILT Iyo                            ."  Sisesta v" 132 EMIT ." lja v" 132 EMIT 132 EMIT ." rtus "   ." andmebaasi. "                                                2 4 HMENU-W W-GOTOXY ." V" 132 EMIT 132 EMIT ." rtusvaru "      ." hulgast  valimiseks on kaks "                                2 5 HMENU-W W-GOTOXY ." v" 147 EMIT ." imalust: "               2 7 HMENU-W W-GOTOXY Iy ." - "                                  10 7 HMENU-W W-GOTOXY Iy ENT-PILT Iyo ." Fikseeri,"             24 7 H-P Iy 205 EMIT 16 EMIT Iyo ."  anna j" 132 EMIT           ." rgmine,"                                                     24 8 H-P Iy 17 EMIT 205 EMIT Iyo ."  anna  esimene. "           -->                                                                                                                             ( #20 MDB-Help: Editor                               01/13/90 ) 2 9 HMENU-W W-GOTOXY ." - " Iy ." F3 " Iyo                      ." N" 132 EMIT ." ita kogu v" 132 EMIT 132 EMIT ." rtusvaru:"   2 10 H-P ." valimiseks " Iy 205 EMIT 16 EMIT ."  , "            25 EMIT ."  , " 24 EMIT ."  , " 17 EMIT 205 EMIT ."  , "        ." fiks.  " ENT-PILT Iyo                                        0 11 HMENU-W W-GOTOXY REVERSE ."  " 24 EMIT ."  "  REVERSE-OFF  21 11 HMENU-W W-GOTOXY REVERSE ." ESC"             REVERSE-OFF  41 11 HMENU-W W-GOTOXY REVERSE ."  " 25 EMIT ."  " REVERSE-OFF  ;                                                               -->                                                                                                                                                                                                                                                                                                                                                                                             \ #21 MDB-Help: Editor control                       01/13/90 ) VARIABLE E-INDEX    VARIABLE E-AHEL   0 E-INDEX !               HERE E-AHEL ! ' H-PF , ' H-KURSOR , ' H-EKRAAN , ' H-DELETE ,     ' H-INPUT ,                                                   : E-ALLA E-INDEX @ 4 + DUP 16 > IF DROP 0 0 ELSE DUP THEN       E-INDEX ! E-AHEL @ + @ EXECUTE ;                                : E-YLES E-INDEX @ 4 - DUP 0 < IF DROP 16 16 ELSE DUP THEN      E-INDEX ! E-AHEL @ + @ EXECUTE ;                                -->                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             \ #22 MDB-Help: Editor control                       01/13/90 ) : E-FUNC CASE                                                   80          OF E-ALLA      ENDOF                                72          OF E-YLES      ENDOF                                ALT-P       OF WriteScr    ENDOF                                 ( Else )     7 EMIT ENDCASE ;                                  : EDIT-HELP DEPTH 1 < 1 ?ERROR                                  BEGIN KELL PCKEY CASE                                           0           OF E-FUNC                  ENDOF                    27          OF EXIT                    ENDOF  ( Escape )         ( Else )         7 EMIT                                        ENDCASE AGAIN ;                                                                                                                 : H-EDI 0 E-INDEX ! H-PF EDIT-HELP ;                            : H-END HMENU-W W-CLEAR ;                                       -->                                                             \ #23 MDB-Help: control                              01/12/90 ) : GOTO-HELP ( --- true= if Tagasi )                             H-INDEX @ CASE                                                          0 OF H-SYS  0 ENDOF                                             4 OF H-LEG  0 ENDOF                                             8 OF H-EDI  0 ENDOF                                            12 OF H-END -1 ENDOF                                               ENDCASE ;                                             : H-FUNC CASE                                                   80          OF H-ALLA      ENDOF                                72          OF H-YLES      ENDOF                                ALT-P       OF WriteScr    ENDOF                                 ( Else )     7 EMIT                                                     ENDCASE ;                                              -->                                                                                                                             \ #24 MDB-Help: control                              01/12/90 ) : CONTROLhELP ( --- )                                           HM-ON                                                           BEGIN KELL PCKEY                                                CASE                                                            0   OF H-FUNC                                ENDOF              13  OF GOTO-HELP IF EXIT ELSE SHOW-HELP THEN ENDOF              27  OF EXIT                                  ENDOF                ( else )         7 EMIT                                       ENDCASE                                                         AGAIN ;                                                         : CONTROLHELP ( --- )                                           CONTROLhELP HM-OFF ;                                            ( SAVE GRUND )                                                  ;S                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              